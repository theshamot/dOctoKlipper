V// source: plugin/PrintJobHistory/js/PrintJobHistory-ImportDialog.js\u000a\u000afunction PrintJobHistoryImportDialog(){\u000a\u000a    var self = this;\u000a\u000a    this.apiClient = null;\u000a\u000a    this.importPrintJobItemDialog = null;\u000a    this.closeDialogHandler = null;\u000a\u000a    this.importInProgress = ko.observable(false);\u000a    this.importStatus = ko.observable();\u000a    this.currentLineNumber = ko.observable();\u000a    this.backupFilePath = ko.observable();\u000a    this.backupSnapshotFilePath = ko.observable();\u000a    this.successMessages = ko.observable();\u000a    this.errorMessages = ko.observable();\u000a    this.shouldTableReload = false;\u000a    /////////////////////////////////////////////////////////////////////////////////////////////////// INIT\u000a\u000a    this.init = function(apiClient){\u000a        self.apiClient = apiClient;\u000a\u000a        self.importPrintJobItemDialog = $("#dialog_printJobHistory_csvImportStatus");\u000a    }\u000a\u000a    this.isInitialized = function() {\u000a        return self.apiClient != null;\u000a    }\u000a\u000a    /////////////////////////////////////////////////////////////////////////////////////////////////// SHOW DIALOG\u000a    this.showDialog = function(closeDialogHandler){\u000a\u000a        self.closeDialogHandler = closeDialogHandler;\u000a\u000a        // reset message\u000a        self.importInProgress(false);\u000a        self.importStatus("");\u000a        self.currentLineNumber("");\u000a        self.backupFilePath("");\u000a        self.backupSnapshotFilePath("");\u000a        self.successMessages("");\u000a        self.errorMessages("");\u000a        self.shouldTableReload = false;\u000a\u000a        self.importPrintJobItemDialog.modal({\u000a            //minHeight: function() { return Math.max($.fn.modal.defaults.maxHeight() - 80, 250); }\u000a            keyboard: false,\u000a            clickClose: false,\u000a            showClose: false,\u000a            backdrop: "static"\u000a        }).css({\u000a            width: 'auto',\u000a            'margin-left': function() { return -($(this).width() /2); }\u000a        });\u000a    }\u000a\u000a    /////////////////////////////////////////////////////////////////////////////////////////////////// UPDATE TEXT\u000a    this.updateText = function(importData){\u000a\u000a                if (importData.importStatus) {\u000a                    self.importStatus(importData.importStatus);\u000a                    switch (importData.importStatus){\u000a                        case "running":\u000a                            self.currentLineNumber(importData.currenLineNumber);\u000a                            self.successMessages(importData.successMessages);\u000a                            errorMessage = importData.errorCollection.join(" <br> ")\u000a                            self.errorMessages(errorMessage);\u000a                            self.importInProgress(true);\u000a                            break;\u000a                        case "finished":\u000a                            // Final message statistic\u000a                            self.importInProgress(false);\u000a                            self.backupFilePath(importData.backupFilePath);\u000a                            self.backupSnapshotFilePath(importData.backupSnapshotFilePath);\u000a                            self.successMessages(importData.successMessages);\u000a                            errorMessage = importData.errorCollection.join(" <br> ")\u000a                            self.errorMessages(errorMessage);\u000a\u000a                            self.shouldTableReload = true;\u000a\u000a                            // enable close button in dialog\u000a//                            self.csvImportStatusDialog.modal('hide');\u000a//                            self.csvImportInProgress(false);\u000a                            break;\u000a                        default:\u000a                    }\u000a                }\u000a                return;\u000a    }\u000a\u000a\u000a    /////////////////////////////////////////////////////////////////////////////////////////////////// CLOSE\u000a    this.closeDialog  = function(){\u000a        self.importPrintJobItemDialog.modal('hide');\u000a\u000a        self.closeDialogHandler(self.shouldTableReload);\u000a    }\u000a\u000a\u000a}\u000a\u000a;\u000a
p0
.