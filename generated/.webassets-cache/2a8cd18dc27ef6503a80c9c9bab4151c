V// source: js/lib/bootstrap/bootstrap-slider.js\u000a/* =========================================================\u000a * bootstrap-slider.js v2.0.0\u000a * http://www.eyecon.ro/bootstrap-slider\u000a * =========================================================\u000a * Copyright 2012 Stefan Petre\u000a *\u000a * Licensed under the Apache License, Version 2.0 (the "License");\u000a * you may not use this file except in compliance with the License.\u000a * You may obtain a copy of the License at\u000a *\u000a * http://www.apache.org/licenses/LICENSE-2.0\u000a *\u000a * Unless required by applicable law or agreed to in writing, software\u000a * distributed under the License is distributed on an "AS IS" BASIS,\u000a * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\u000a * See the License for the specific language governing permissions and\u000a * limitations under the License.\u000a * ========================================================= */\u000a\u000a(function( $ ) {\u000a\u000a    var pauseEvent = function(e) {\u000a        if (e.stopPropagation) e.stopPropagation();\u000a        if (e.preventDefault) e.preventDefault();\u000a        e.cancelBubble = true;\u000a        e.returnValue = false;\u000a        return false;\u000a    }\u000a\u000a	var ErrorMsgs = {\u000a		formatInvalidInputErrorMsg : function(input) {\u000a			return "Invalid input value '" + input + "' passed in";\u000a		},\u000a		callingContextNotSliderInstance : "Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"\u000a	};\u000a\u000a	var Slider = function(element, options) {\u000a		var el = this.element = $(element).hide();\u000a		var origWidth = el.outerWidth();\u000a\u000a		var updateSlider = false;\u000a		var parent = this.element.parent();\u000a\u000a\u000a		if (parent.hasClass('slider') === true) {\u000a			updateSlider = true;\u000a			this.picker = parent;\u000a		} else {\u000a			this.picker = $('<div class="slider">'+\u000a								'<div class="slider-track">'+\u000a									'<div class="slider-selection"></div>'+\u000a									'<div class="slider-handle"></div>'+\u000a									'<div class="slider-handle"></div>'+\u000a								'</div>'+\u000a								'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'+\u000a							'</div>')\u000a								.insertBefore(this.element)\u000a								.append(this.element);\u000a		}\u000a\u000a		this.id = this.element.data('slider-id')||options.id;\u000a		if (this.id) {\u000a			this.picker[0].id = this.id;\u000a		}\u000a\u000a		if (typeof Modernizr !== 'undefined' && Modernizr.touch) {\u000a			this.touchCapable = true;\u000a		}\u000a\u000a		var tooltip = this.element.data('slider-tooltip')||options.tooltip;\u000a\u000a		this.tooltip = this.picker.find('.tooltip');\u000a		this.tooltipInner = this.tooltip.find('div.tooltip-inner');\u000a\u000a		this.orientation = this.element.data('slider-orientation')||options.orientation;\u000a		switch(this.orientation) {\u000a			case 'vertical':\u000a				this.picker.addClass('slider-vertical');\u000a				this.stylePos = 'top';\u000a				this.mousePos = 'pageY';\u000a				this.sizePos = 'offsetHeight';\u000a				this.tooltip.addClass('right')[0].style.left = '100%';\u000a				break;\u000a			default:\u000a				this.picker\u000a					.addClass('slider-horizontal')\u000a					.css('width', origWidth);\u000a				this.orientation = 'horizontal';\u000a				this.stylePos = 'left';\u000a				this.mousePos = 'pageX';\u000a				this.sizePos = 'offsetWidth';\u000a				this.tooltip.addClass('top')[0].style.top = -this.tooltip.outerHeight() - 14 + 'px';\u000a				break;\u000a		}\u000a\u000a		['min', 'max', 'step', 'value'].forEach(function(attr) {\u000a            // the "|| 0" is used when the expression before it evaluates to an empty string (causes bad calculations in IE later on)\u000a			this[attr] = el.data('slider-' + attr) || options[attr] || el.prop(attr) || 0;\u000a		}, this);\u000a\u000a		if (this.value instanceof Array) {\u000a			this.range = true;\u000a		}\u000a\u000a		this.selection = this.element.data('slider-selection')||options.selection;\u000a		this.selectionEl = this.picker.find('.slider-selection');\u000a		if (this.selection === 'none') {\u000a			this.selectionEl.addClass('hide');\u000a		}\u000a\u000a		this.selectionElStyle = this.selectionEl[0].style;\u000a\u000a		this.handle1 = this.picker.find('.slider-handle:first');\u000a		this.handle1Stype = this.handle1[0].style;\u000a		this.handle2 = this.picker.find('.slider-handle:last');\u000a		this.handle2Stype = this.handle2[0].style;\u000a\u000a		var handle = this.element.data('slider-handle')||options.handle;\u000a		switch(handle) {\u000a			case 'round':\u000a				this.handle1.addClass('round');\u000a				this.handle2.addClass('round');\u000a				break;\u000a			case 'triangle':\u000a				this.handle1.addClass('triangle');\u000a				this.handle2.addClass('triangle');\u000a				break;\u000a		}\u000a\u000a		if (this.range) {\u000a			this.value[0] = Math.max(this.min, Math.min(this.max, this.value[0]));\u000a			this.value[1] = Math.max(this.min, Math.min(this.max, this.value[1]));\u000a		} else {\u000a			this.value = [ Math.max(this.min, Math.min(this.max, this.value))];\u000a			this.handle2.addClass('hide');\u000a			if (this.selection === 'after') {\u000a				this.value[1] = this.max;\u000a			} else {\u000a				this.value[1] = this.min;\u000a			}\u000a		}\u000a		this.diff = this.max - this.min;\u000a		this.percentage = [\u000a			(this.value[0]-this.min)*100/this.diff,\u000a			(this.value[1]-this.min)*100/this.diff,\u000a			this.step*100/this.diff\u000a		];\u000a\u000a		this.offset = this.picker.offset();\u000a		this.size = this.picker[0][this.sizePos];\u000a\u000a		if (options.hasOwnProperty("formater") && !options.hasOwnProperty("formatter")) options["formatter"] = options["formater"];\u000a		this.formatter = options.formatter;\u000a\u000a		this.reversed = this.element.data('slider-reversed')||options.reversed;\u000a\u000a		this.layout();\u000a\u000a		if (this.touchCapable) {\u000a			// Touch: Bind touch events:\u000a			this.picker.on({\u000a				touchstart: $.proxy(this.mousedown, this)\u000a			});\u000a		}\u000a		this.picker.on({\u000a			mousedown: $.proxy(this.mousedown, this)\u000a		});\u000a\u000a		if(tooltip === 'hide') {\u000a			this.tooltip.addClass('hide');\u000a		} else if(tooltip === 'always') {\u000a			this.showTooltip();\u000a			this.alwaysShowTooltip = true;\u000a		} else {\u000a			this.picker.on({\u000a				mouseenter: $.proxy(this.showTooltip, this),\u000a				mouseleave: $.proxy(this.hideTooltip, this)\u000a			});\u000a		}\u000a\u000a		if (updateSlider === true) {\u000a			var old = this.getValue();\u000a			var val = this.calculateValue();\u000a			this.element\u000a				.trigger({\u000a					'type': 'slide',\u000a					'value': val\u000a				})\u000a				.data('value', val)\u000a				.prop('value', val);\u000a\u000a			if (old !== val) {\u000a				this.element\u000a					.trigger({\u000a						'type': 'slideChange',\u000a						'new': val, // without a string literal, IE8 will interpret as the JS "new" keyword\u000a						'old': old\u000a					})\u000a					.data('value', val)\u000a					.prop('value', val);\u000a			}\u000a		}\u000a\u000a		this.enabled = options.enabled &&\u000a						(this.element.data('slider-enabled') === undefined || this.element.data('slider-enabled') === true);\u000a		if(!this.enabled)\u000a		{\u000a			this.disable();\u000a		}\u000a	};\u000a\u000a	Slider.prototype = {\u000a		constructor: Slider,\u000a\u000a		over: false,\u000a		inDrag: false,\u000a\u000a		showTooltip: function(){\u000a			this.recalculate();\u000a			this.tooltip.addClass('in');\u000a			this.over = true;\u000a		},\u000a\u000a		hideTooltip: function(){\u000a			if (this.inDrag === false && this.alwaysShowTooltip !== true) {\u000a				this.tooltip.removeClass('in');\u000a			}\u000a			this.over = false;\u000a		},\u000a\u000a		layout: function(){\u000a			var positionPercentages;\u000a\u000a			if(this.reversed) {\u000a				positionPercentages = [ 100 - this.percentage[0], this.percentage[1] ];\u000a			} else {\u000a				positionPercentages = [ this.percentage[0], this.percentage[1] ];\u000a			}\u000a\u000a			this.handle1Stype[this.stylePos] = positionPercentages[0]+'%';\u000a			this.handle2Stype[this.stylePos] = positionPercentages[1]+'%';\u000a\u000a			if (this.orientation === 'vertical') {\u000a				this.selectionElStyle.top = Math.min(positionPercentages[0], positionPercentages[1]) +'%';\u000a				this.selectionElStyle.height = Math.abs(positionPercentages[0] - positionPercentages[1]) +'%';\u000a			} else {\u000a				this.selectionElStyle.left = Math.min(positionPercentages[0], positionPercentages[1]) +'%';\u000a				this.selectionElStyle.width = Math.abs(positionPercentages[0] - positionPercentages[1]) +'%';\u000a			}\u000a\u000a			if (this.range) {\u000a				this.tooltipInner.text(\u000a					this.formatter(this.value[0]) + ' : ' + this.formatter(this.value[1])\u000a				);\u000a				this.tooltip[0].style[this.stylePos] = this.size * (positionPercentages[0] + (positionPercentages[1] - positionPercentages[0])/2)/100 - (this.orientation === 'vertical' ? this.tooltip.outerHeight()/2 : this.tooltip.outerWidth()/2) +'px';\u000a			} else {\u000a				this.tooltipInner.text(\u000a					this.formatter(this.value[0])\u000a				);\u000a				this.tooltip[0].style[this.stylePos] = this.size * positionPercentages[0]/100 - (this.orientation === 'vertical' ? this.tooltip.outerHeight()/2 : this.tooltip.outerWidth()/2) +'px';\u000a			}\u000a		},\u000a\u000a		mousedown: function(ev) {\u000a            pauseEvent(ev);\u000a\u000a			if(!this.isEnabled()) {\u000a				return false;\u000a			}\u000a			// Touch: Get the original event:\u000a			if (this.touchCapable && ev.type === 'touchstart') {\u000a				ev = ev.originalEvent;\u000a			}\u000a\u000a			// mouse: ignore anything but left-click\u000a			if (ev.hasOwnProperty("button") && ev.button != 0) {\u000a				return false;\u000a			}\u000a\u000a			this.offset = this.picker.offset();\u000a			this.size = this.picker[0][this.sizePos];\u000a\u000a			var percentage = this.getPercentage(ev);\u000a\u000a			if (this.range) {\u000a				var diff1 = Math.abs(this.percentage[0] - percentage);\u000a				var diff2 = Math.abs(this.percentage[1] - percentage);\u000a				this.dragged = (diff1 < diff2) ? 0 : 1;\u000a			} else {\u000a				this.dragged = 0;\u000a			}\u000a\u000a			this.percentage[this.dragged] = this.reversed ? 100 - percentage : percentage;\u000a			this.layout();\u000a\u000a			if (this.touchCapable) {\u000a				// Touch: Bind touch events:\u000a				$(document).on({\u000a					touchmove: $.proxy(this.mousemove, this),\u000a					touchend: $.proxy(this.mouseup, this)\u000a				});\u000a			}\u000a			$(document).on({\u000a				mousemove: $.proxy(this.mousemove, this),\u000a				mouseup: $.proxy(this.mouseup, this)\u000a			});\u000a\u000a			this.inDrag = true;\u000a			var val = this.calculateValue();\u000a			this.setValue(val);\u000a			this.element.trigger({\u000a					type: 'slideStart',\u000a					value: val\u000a				}).trigger({\u000a					type: 'slide',\u000a					value: val\u000a				});\u000a			return false;\u000a		},\u000a\u000a		mousemove: function(ev) {\u000a            pauseEvent(ev);\u000a\u000a			if(!this.isEnabled()) {\u000a				return false;\u000a			}\u000a			// Touch: Get the original event:\u000a			if (this.touchCapable && ev.type === 'touchmove') {\u000a				ev = ev.originalEvent;\u000a			}\u000a\u000a			var percentage = this.getPercentage(ev);\u000a			if (this.range) {\u000a				if (this.dragged === 0 && this.percentage[1] < percentage) {\u000a					this.percentage[0] = this.percentage[1];\u000a					this.dragged = 1;\u000a				} else if (this.dragged === 1 && this.percentage[0] > percentage) {\u000a					this.percentage[1] = this.percentage[0];\u000a					this.dragged = 0;\u000a				}\u000a			}\u000a			this.percentage[this.dragged] = this.reversed ? 100 - percentage : percentage;\u000a			this.layout();\u000a			var val = this.calculateValue();\u000a			this.setValue(val);\u000a			this.element\u000a				.trigger({\u000a					type: 'slide',\u000a					value: val\u000a				})\u000a				.data('value', val)\u000a				.prop('value', val);\u000a			return false;\u000a		},\u000a\u000a		mouseup: function(ev) {\u000a            pauseEvent(ev);\u000a\u000a			if(!this.isEnabled()) {\u000a				return false;\u000a			}\u000a			if (this.touchCapable) {\u000a				// Touch: Bind touch events:\u000a				$(document).off({\u000a					touchmove: this.mousemove,\u000a					touchend: this.mouseup\u000a				});\u000a			}\u000a			$(document).off({\u000a				mousemove: this.mousemove,\u000a				mouseup: this.mouseup\u000a			});\u000a\u000a			this.inDrag = false;\u000a			if (this.over === false) {\u000a				this.hideTooltip();\u000a			}\u000a			var val = this.calculateValue();\u000a			this.layout();\u000a			this.element\u000a				.data('value', val)\u000a				.prop('value', val)\u000a				.trigger({\u000a					type: 'slideStop',\u000a					value: val\u000a				});\u000a			return false;\u000a		},\u000a\u000a		calculateValue: function() {\u000a			var val;\u000a			if (this.range) {\u000a				val = [\u000a					(Math.max(this.min, this.min + Math.round((this.diff * this.percentage[0]/100)/this.step)*this.step)),\u000a					(Math.min(this.max, this.min + Math.round((this.diff * this.percentage[1]/100)/this.step)*this.step))\u000a				];\u000a				this.value = val;\u000a			} else {\u000a				val = (this.min + Math.round((this.diff * this.percentage[0]/100)/this.step)*this.step);\u000a				if (val < this.min) {\u000a					val = this.min;\u000a				}\u000a				else if (val > this.max) {\u000a					val = this.max;\u000a				}\u000a				val = parseFloat(val);\u000a				this.value = [val, this.value[1]];\u000a			}\u000a			return val;\u000a		},\u000a\u000a		getPercentage: function(ev) {\u000a			if (this.touchCapable && ev.touches && ev.touches[0]) {\u000a				ev = ev.touches[0];\u000a			}\u000a			var percentage = (ev[this.mousePos] - this.offset[this.stylePos])*100/this.size;\u000a			percentage = Math.round(percentage/this.percentage[2])*this.percentage[2];\u000a			return Math.max(0, Math.min(100, percentage));\u000a		},\u000a\u000a		getValue: function() {\u000a			if (this.range) {\u000a				return this.value;\u000a			}\u000a			return this.value[0];\u000a		},\u000a\u000a		setValue: function(val) {\u000a			this.value = this.validateInputValue(val);\u000a\u000a			if (this.range) {\u000a				this.value[0] = Math.max(this.min, Math.min(this.max, this.value[0]));\u000a				this.value[1] = Math.max(this.min, Math.min(this.max, this.value[1]));\u000a			} else {\u000a				this.value = [ Math.max(this.min, Math.min(this.max, this.value))];\u000a				this.handle2.addClass('hide');\u000a				if (this.selection === 'after') {\u000a					this.value[1] = this.max;\u000a				} else {\u000a					this.value[1] = this.min;\u000a				}\u000a			}\u000a			this.diff = this.max - this.min;\u000a			this.percentage = [\u000a				(this.value[0]-this.min)*100/this.diff,\u000a				(this.value[1]-this.min)*100/this.diff,\u000a				this.step*100/this.diff\u000a			];\u000a			this.layout();\u000a		},\u000a\u000a		setMin: function(min) {\u000a			this.min = min;\u000a		},\u000a\u000a		setMax: function(max) {\u000a			this.max =  max;\u000a		},\u000a\u000a		validateInputValue : function(val) {\u000a			if(typeof val === 'number') {\u000a				return val;\u000a			} else if(val instanceof Array) {\u000a				val.forEach(function(input) { if (typeof input !== 'number') { throw new Error( ErrorMsgs.formatInvalidInputErrorMsg(input) ); }});\u000a				return val;\u000a			} else {\u000a				throw new Error( ErrorMsgs.formatInvalidInputErrorMsg(val) );\u000a			}\u000a		},\u000a\u000a		destroy: function(){\u000a			this.element.show().insertBefore(this.picker);\u000a			this.picker.remove();\u000a			$(this.element).removeData('slider');\u000a			$(this.element).off();\u000a		},\u000a\u000a		disable: function() {\u000a			this.enabled = false;\u000a			this.tooltip.addClass('hide');\u000a			this.picker.addClass('slider-disabled');\u000a			this.element.trigger('slideDisabled');\u000a		},\u000a\u000a		enable: function() {\u000a			this.enabled = true;\u000a			this.tooltip.removeClass('hide');\u000a			this.picker.removeClass('slider-disabled');\u000a			this.element.trigger('slideEnabled');\u000a		},\u000a\u000a		toggle: function() {\u000a			if(this.enabled) {\u000a				this.disable();\u000a			} else {\u000a				this.enable();\u000a			}\u000a		},\u000a\u000a		isEnabled: function() {\u000a			return this.enabled;\u000a		},\u000a\u000a		recalculate: function() {\u000a			if (this.picker === undefined) return;\u000a			this.offset = this.picker.offset();\u000a			this.size = this.picker[0][this.sizePos];\u000a		},\u000a	};\u000a\u000a	var publicMethods = {\u000a		getValue : Slider.prototype.getValue,\u000a		setValue : Slider.prototype.setValue,\u000a		setMin: Slider.prototype.setMin,\u000a		setMax: Slider.prototype.setMax,\u000a		destroy : Slider.prototype.destroy,\u000a		disable : Slider.prototype.disable,\u000a		enable : Slider.prototype.enable,\u000a		toggle : Slider.prototype.toggle,\u000a		isEnabled: Slider.prototype.isEnabled\u000a	};\u000a\u000a	$.fn.slider = function (option) {\u000a		if (typeof option === 'string') {\u000a			var args = Array.prototype.slice.call(arguments, 1);\u000a			return invokePublicMethod.call(this, option, args);\u000a		} else {\u000a			return createNewSliderInstance.call(this, option);\u000a		}\u000a	};\u000a\u000a	function invokePublicMethod(methodName, args) {\u000a		if(publicMethods[methodName]) {\u000a			var sliderObject = retrieveSliderObjectFromElement(this);\u000a			return publicMethods[methodName].apply(sliderObject, args);\u000a		} else {\u000a			throw new Error("method '" + methodName + "()' does not exist for slider.");\u000a		}\u000a	}\u000a\u000a	function retrieveSliderObjectFromElement(element) {\u000a		var sliderObject = $(element).data('slider');\u000a		if(sliderObject && sliderObject instanceof Slider) {\u000a			return sliderObject;\u000a		} else {\u000a			throw new Error(ErrorMsgs.callingContextNotSliderInstance);\u000a		}\u000a	}\u000a\u000a	function createNewSliderInstance(opts) {\u000a		var $this = $(this),\u000a			data = $this.data('slider'),\u000a			options = typeof opts === 'object' && opts;\u000a		if (!data)  {\u000a			$this.data('slider', (data = new Slider(this, $.extend({}, $.fn.slider.defaults,options))));\u000a		}\u000a		return $this;\u000a	}\u000a\u000a	$.fn.slider.defaults = {\u000a		min: 0,\u000a		max: 10,\u000a		step: 1,\u000a		orientation: 'horizontal',\u000a		value: 5,\u000a		selection: 'before',\u000a		tooltip: 'show',\u000a		handle: 'round',\u000a		reversed : false,\u000a		enabled: true,\u000a		formatter: function(value) {\u000a			return value;\u000a		}\u000a	};\u000a\u000a	$.fn.slider.Constructor = Slider;\u000a\u000a})( window.jQuery );\u000a\u000a;\u000a
p0
.