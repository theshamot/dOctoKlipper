V// source: plugin/PrintJobHistory/js/PrintJobHistory-APIClient.js\u000a\u000a\u000afunction PrintJobHistoryAPIClient(pluginId, baseUrl) {\u000a\u000a    this.pluginId = pluginId;\u000a    this.baseUrl = baseUrl;\u000a\u000a\u000a    // see https://gomakethings.com/how-to-build-a-query-string-from-an-object-with-vanilla-js/\u000a    var _buildRequestQuery = function (data) {\u000a        // If the data is already a string, return it as-is\u000a        if (typeof (data) === 'string') return data;\u000a\u000a        // Create a query array to hold the key/value pairs\u000a        var query = [];\u000a\u000a        // Loop through the data object\u000a        for (var key in data) {\u000a            if (data.hasOwnProperty(key)) {\u000a\u000a                // Encode each key and value, concatenate them into a string, and push them to the array\u000a                query.push(encodeURIComponent(key) + '=' + encodeURIComponent(data[key]));\u000a            }\u000a        }\u000a        // Join each item in the array with a `&` and return the resulting string\u000a        return query.join('&');\u000a\u000a    };\u000a\u000a    var _addApiKeyIfNecessary = function(urlContext){\u000a        if (UI_API_KEY){\u000a            urlContext = urlContext + "?apikey=" + UI_API_KEY;\u000a        }\u000a        return urlContext;\u000a    }\u000a\u000a    this.getDownloadDatabaseUrl = function(exportType){\u000a        return _addApiKeyIfNecessary("./plugin/" + this.pluginId + "/downloadDatabase");\u000a    }\u000a\u000a\u000a    this.getSampleCSVUrl = function(){\u000a        return _addApiKeyIfNecessary("./plugin/" + this.pluginId + "/sampleCSV");\u000a    }\u000a\u000a    this.getExportUrl = function(exportType){\u000a        return _addApiKeyIfNecessary("./plugin/" + this.pluginId + "/exportPrintJobHistory/" + exportType);\u000a    }\u000a\u000a    this.getProxiedSnapshotUrl = function(snapshotFilename){\u000a        http://localhost:5000/plugin/PrintJobHistory/mysnapshot\u000a        return _addApiKeyIfNecessary("./plugin/" + this.pluginId + "/mysnapshot");\u000a    }\u000a\u000a    this.getSnapshotUrl = function(snapshotFilename){\u000a        //http://localhost:5000/plugin/PrintJobHistory/printJobSnapshot/20191003-153311\u000a        return _addApiKeyIfNecessary("./plugin/" + this.pluginId + "/printJobSnapshot/" + snapshotFilename);\u000a    }\u000a\u000a    this.uploadSnapshotUrl = function(snapshotFilename){\u000a        //http://localhost:5000/plugin/PrintJobHistory/printJobSnapshot/20191003-153311\u000a        return _addApiKeyIfNecessary("./plugin/" + this.pluginId + "/upload/snapshot/" + snapshotFilename);\u000a    }\u000a\u000a    // load FILTERED/SORTED PrintJob-Items\u000a    this.callLoadPrintJobsByQuery = function (tableQuery, responseHandler){\u000a        query = _buildRequestQuery(tableQuery);\u000a        urlToCall = this.baseUrl + "plugin/"+this.pluginId+"/loadPrintJobHistoryByQuery?"+query;\u000a        $.ajax({\u000a            //url: API_BASEURL + "plugin/"+PLUGIN_ID+"/loadPrintJobHistory",\u000a            url: urlToCall,\u000a            type: "GET"\u000a        }).done(function( data ){\u000a            responseHandler(data)\u000a            //shoud be done by the server to make sure the server is informed countdownDialog.modal('hide');\u000a            //countdownDialog.modal('hide');\u000a            //countdownCircle = null;\u000a        });\u000a    }\u000a    // load STATISTICS PrintJob-Items\u000a    this.callLoadStatisticsByQuery = function (tableQuery, responseHandler){\u000a        query = _buildRequestQuery(tableQuery);\u000a        urlToCall = this.baseUrl + "plugin/"+this.pluginId+"/loadStatisticByQuery?"+query;\u000a        $.ajax({\u000a            //url: API_BASEURL + "plugin/"+PLUGIN_ID+"/loadPrintJobHistory",\u000a            url: urlToCall,\u000a            type: "GET"\u000a        }).done(function( data ){\u000a            responseHandler(data)\u000a            //shoud be done by the server to make sure the server is informed countdownDialog.modal('hide');\u000a            //countdownDialog.modal('hide');\u000a            //countdownCircle = null;\u000a        });\u000a    }\u000a\u000a    this.callDeleteDatabase = function(responseHandler){\u000a        $.ajax({\u000a            //url: API_BASEURL + "plugin/"+PLUGIN_ID+"/loadPrintJobHistory",\u000a            url: this.baseUrl + "plugin/"+this.pluginId+"/deleteDatabase",\u000a            type: "DELETE"\u000a        }).done(function( data ){\u000a            responseHandler(data)\u000a            //shoud be done by the server to make sure the server is informed countdownDialog.modal('hide');\u000a            //countdownDialog.modal('hide');\u000a            //countdownCircle = null;\u000a        });\u000a    }\u000a\u000a    // remove PrintJob-Item\u000a    this.callStorePrintJob = function (databaseId, printJobItem, responseHandler){\u000a        jsonPayload = ko.toJSON(printJobItem)\u000a\u000a        $.ajax({\u000a            //url: API_BASEURL + "plugin/"+PLUGIN_ID+"/loadPrintJobHistory",\u000a            url: this.baseUrl + "plugin/" + this.pluginId + "/storePrintJob/" + databaseId,\u000a            dataType: "json",\u000a            contentType: "application/json; charset=UTF-8",\u000a            data: jsonPayload,\u000a            type: "PUT"\u000a        }).done(function( data ){\u000a            responseHandler();\u000a        });\u000a    }\u000a\u000a    // remove PrintJob-Item\u000a    this.callRemovePrintJob = function (databaseId, responseHandler){\u000a        $.ajax({\u000a            //url: API_BASEURL + "plugin/"+PLUGIN_ID+"/loadPrintJobHistory",\u000a            url: this.baseUrl + "plugin/" + this.pluginId + "/removePrintJob/" + databaseId,\u000a            type: "DELETE"\u000a        }).done(function( data ){\u000a            responseHandler();\u000a        });\u000a    }\u000a\u000a    // deactivate the Plugin/Check\u000a    this.callDeactivatePluginCheck =  function (){\u000a        $.ajax({\u000a            url: this.baseUrl + "plugin/"+ this.pluginId +"/deactivatePluginCheck",\u000a            type: "PUT"\u000a        }).done(function( data ){\u000a            //responseHandler(data)\u000a        });\u000a    }\u000a\u000a    // deactivate the Plugin/Check\u000a    this.callTakeSnapshot =  function (snapshotFilename, responseHandler){\u000a        $.ajax({\u000a            url: this.baseUrl + "plugin/"+ this.pluginId +"/takeSnapshot/"+snapshotFilename,\u000a            type: "PUT"\u000a        }).always(function( data ){\u000a            responseHandler(data)\u000a        });\u000a    }\u000a\u000a    // delete snapshotImage\u000a    this.callDeleteSnapshotImage =  function (snapshotFilename, responseHandler){\u000a        $.ajax({\u000a            url: this.baseUrl + "plugin/"+ this.pluginId +"/deleteSnapshotImage/"+snapshotFilename,\u000a            type: "DELETE"\u000a        }).done(function( data ){\u000a            responseHandler(data)\u000a        });\u000a    }\u000a\u000a\u000a    this.callForceCloseEditDialog = function(responseHandler){\u000a        $.ajax({\u000a            //url: API_BASEURL + "plugin/"+PLUGIN_ID+"/loadPrintJobHistory",\u000a            url: this.baseUrl + "plugin/"+this.pluginId+"/forceCloseEditDialog",\u000a            type: "PUT"\u000a        }).done(function( data ){\u000a            responseHandler(data)\u000a            //shoud be done by the server to make sure the server is informed countdownDialog.modal('hide');\u000a            //countdownDialog.modal('hide');\u000a            //countdownCircle = null;\u000a        });\u000a    }\u000a\u000a\u000a}\u000a\u000a;\u000a
p0
.