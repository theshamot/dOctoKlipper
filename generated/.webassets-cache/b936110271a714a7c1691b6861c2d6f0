V// source: plugin/DisplayLayerProgress/js/ResetSettingsUtil.js\u000a/**\u000a *\u000a */\u000afunction ResetSettingsUtil(){\u000a\u000a    var RESET_BUTTON_ID = "resetSettingsButton"\u000a    var RESET_BUTTON_HTML = "<button id='"+RESET_BUTTON_ID+"' class='btn btn-warning' style='margin-right:3%'>Reset Settings</button>"\u000a\u000a    this.assignResetSettingsFeature = function(PLUGIN_ID_string, mapSettingsToViewModel_function){\u000a        var resetSettingsButtonFunction = function(){\u000a            var resetButton = $("#" + RESET_BUTTON_ID).hide();\u000a        }\u000a        // hide reset button when hidding settings. needed because of next dialog-shown event\u000a        var settingsDialog = $("#settings_dialog");\u000a        var settingsDialogDOMElement = settingsDialog.get(0);\u000a\u000a        var eventObject = $._data(settingsDialogDOMElement, 'events');\u000a        if (eventObject != undefined && eventObject.hide != undefined){\u000a            // already there, is it my function\u000a            if (eventObject.hide[0].handler.name != "resetSettingsButtonFunction"){\u000a                settingsDialog.on('hide', resetSettingsButtonFunction);\u000a            }\u000a        } else {\u000a            settingsDialog.on('hide', resetSettingsButtonFunction);\u000a        }\u000a\u000a        // add click hook for own plugin the check if resetSettings is available\u000a        var pluginSettingsLink = $("ul[id=settingsTabs] > li[id^=settings_plugin_"+PLUGIN_ID_string+"] > a[href^=\u005c\u005c#settings_plugin_"+PLUGIN_ID_string+"]:not([hooked="+PLUGIN_ID_string+"])");\u000a        pluginSettingsLink.attr("hooked", PLUGIN_ID_string);\u000a        pluginSettingsLink.click(function() {\u000a            // call backend, is resetSettingsButtonEnabled\u000a            // hide reset settings button\u000a            $.ajax({\u000a                url: API_BASEURL + "plugin/"+PLUGIN_ID_string+"?action=isResetSettingsEnabled",\u000a                type: "GET"\u000a            }).done(function( data ){\u000a                var resetButton = $("#" + RESET_BUTTON_ID);\u000a                if (data.enabled == "true"){\u000a                    // build-button, if necessary\u000a                    if (resetButton.length == 0){\u000a                        // add button to page\u000a                        $(".modal-footer > .aboutlink").after(RESET_BUTTON_HTML);\u000a                        resetButton = $("#" + RESET_BUTTON_ID);\u000a                    }\u000a\u000a                    // add/update click action\u000a                    resetButton.unbind( "click" );\u000a                    resetButton.click(function() {\u000a                        $.ajax({\u000a                            url: API_BASEURL + "plugin/"+PLUGIN_ID_string+"?action=resetSettings",\u000a                            type: "GET"\u000a                        }).done(function( data ){\u000a                            new PNotify({\u000a                                title: "Default settings saved!",\u000a                                text: "The plugin-settings were now reseted to default values.<br>Please do a Browser reload (Strg+F5) to update all settings in the UI.",\u000a                                type: "info",\u000a                                hide: true\u000a                            });\u000a\u000a                            mapSettingsToViewModel_function(data);\u000a                        });\u000a                    });\u000a\u000a                    resetButton.show();\u000a                } else {\u000a                    if (resetButton.length != 0){\u000a                        resetButton.hide();\u000a                    }\u000a                }\u000a            });\u000a        });\u000a\u000a        // default behaviour -> hide reset button --> if not already assigned\u000a        var otherSettingsLink = $("ul[id=settingsTabs] > li[id^=settings_] > a[href^=\u005c\u005c#settings_]:not([hooked])");\u000a        if (otherSettingsLink.length != 0){\u000a            otherSettingsLink.attr("hooked", "otherSettings");\u000a            otherSettingsLink.click(resetSettingsButtonFunction);\u000a        }\u000a    }\u000a\u000a}\u000a\u000a;\u000a
p0
.