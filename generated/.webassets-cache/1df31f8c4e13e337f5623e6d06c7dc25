V// source: plugin/detailedprogress/js/DetailedProgress.js\u000a/*\u000a * View model for OctoPrint-DetailedProgress\u000a *\u000a * Author: jneilliii\u000a * License: AGPLv3\u000a */\u000a$(function() {\u000a  function DetailedProgressViewModel(parameters) {\u000a    var self = this;\u000a\u000a    // assign the injected parameters, e.g.:\u000a    self.settings = parameters[0];\u000a\u000a    self.time_to_change = ko.observable();\u000a    self.eta_strftime = ko.observable();\u000a    self.etl_format = ko.observable();\u000a    self.print_done_message = ko.observable();\u000a    self.use_M73 = ko.observable();\u000a    self.show_ip_at_startup = ko.observable();\u000a    self.all_messages = ko.observableArray();\u000a    self.messages = ko.observableArray();\u000a\u000a    self.onBeforeBinding = function() {\u000a      self.time_to_change(self.settings.settings.plugins.detailedprogress.time_to_change());\u000a      self.eta_strftime(self.settings.settings.plugins.detailedprogress.eta_strftime());\u000a      self.etl_format(self.settings.settings.plugins.detailedprogress.etl_format());\u000a      self.use_M73(self.settings.settings.plugins.detailedprogress.use_M73());\u000a      self.show_ip_at_startup(self.settings.settings.plugins.detailedprogress.show_ip_at_startup());\u000a      self.print_done_message(self.settings.settings.plugins.detailedprogress.print_done_message());\u000a      self.messages(self.settings.settings.plugins.detailedprogress.messages());\u000a      self.all_messages(self.settings.settings.plugins.detailedprogress.all_messages());\u000a    };\u000a\u000a    self.onEventSettingsUpdated = function (payload) {\u000a      self.time_to_change = self.settings.settings.plugins.detailedprogress.time_to_change();\u000a      self.eta_strftime = self.settings.settings.plugins.detailedprogress.eta_strftime();\u000a      self.etl_format = self.settings.settings.plugins.detailedprogress.etl_format();\u000a      self.use_M73 = self.settings.settings.plugins.detailedprogress.use_M73();\u000a      self.show_ip_at_startup = self.settings.settings.plugins.detailedprogress.show_ip_at_startup();\u000a      self.print_done_message = self.settings.settings.plugins.detailedprogress.print_done_message();\u000a      self.messages = self.settings.settings.plugins.detailedprogress.messages();\u000a      self.all_messages = self.settings.settings.plugins.detailedprogress.all_messages();\u000a    };\u000a\u000a    $('#dtPrg_addMsg').click(function () {\u000a      var msgToAdd = $('#dtPrg_msgToAdd').val();\u000a      // Prevent blanks and duplicates\u000a      if (msgToAdd.length > 0 &&\u000a        $('#dtPrg_selMsg option').filter(function () { return $(this).html() == msgToAdd; }).length == 0) {\u000a        $('#dtPrg_selMsg').append('<option selected>'+msgToAdd+'</option>');\u000a        self.all_messages.push(msgToAdd);\u000a        }\u000a        $('#dtPrg_msgToAdd').val('');; // Clear the text box\u000a        return false;\u000a    });\u000a\u000a    $('#dtPrg_removeSelected').click(function () {\u000a      var msgToRemove = $('#dtPrg_selMsg').val();\u000a      if (msgToRemove.length == 0) return false;\u000a      $('#dtPrg_selMsg option').each(function() {\u000a        if (msgToRemove.indexOf($(this).val()) > - 1) $(this).remove();\u000a      });\u000a      self.all_messages.removeAll(msgToRemove);\u000a      return false;\u000a    });\u000a  };\u000a\u000a  // view model class, parameters for constructor, container to bind to\u000a  OCTOPRINT_VIEWMODELS.push([\u000a      DetailedProgressViewModel,\u000a\u000a      // e.g. loginStateViewModel, settingsViewModel, ...\u000a      ["settingsViewModel"],\u000a\u000a      // e.g. #settings_plugin_DetailedProgress, #tab_plugin_DetailedProgress, ...\u000a      []\u000a  ]);\u000a});\u000a\u000a;\u000a
p0
.